<!-- This is a blank template.  You can copy this to make a new template page. -->

{% extends 'base.html' %}

{% block body %}

{% if current_user.isadmin or current_user == proj.owner %}
    <a href="/project/edit/{{proj.id}}"><img width='40' src="/static/edit.png"></a> 
    <a href="/project/delete/{{proj.id}}"><img width='40' src="/static/delete.png"></a> <br>
{% endif %}

Created: {{moment(proj.createDateTime).calendar()}} <br>

Owner: {{proj.owner.fname}} {{proj.owner.lname}} <br>
Status: {{proj.status}} <br>
Name: {{proj.name}} <br>
Product: {{proj.product|safe}} <br>

{% if proj.milestones|length != 0 and not edit %}
    <h3>Milestones:</h3>
    {% for m in proj.milestones %}
        <a href="/project/milestone/edit/{{proj.id}}/{{m.oid}}"><img width='20' src="/static/edit.png"></a>
        <a href="/project/milestone/delete/{{proj.id}}/{{m.oid}}"><img width='20' src="/static/delete.png"></a>
        Number: {{m.number}} <br>
        Status: {{m.status}} <br>
        Name: {{m.name}} <br>
        Description: {{m.desc|safe}} <br>
        {% if m.reflection %}
            {{m.reflection|safe}} <br>
        {% endif %}
        <hr>
    {% endfor %}
{% endif %}

{% if proj.milestones|length == 0 or proj.milestones[-1].status == 'Done' or edit %}
    {% if edit %}
        <h3>Edit Milestone </h3>
    {% else %}
        <h3>New Milestone</h3>
    {% endif %}
    <form method=post>
        {{ form.hidden_tag() }}
        Name: <br>
        {{ form.name(class='form-control') }} <br>
        What needs to be done to complete this milestone?: <br>
        {{ form.desc(class='tmce-editor') }} <br>
        Status: <br>
        {{ form.status(class="form-control") }} <br>
        {{ form.submit(class="form-control btn-primary") }}
    </form> 
{% endif %}

{% endblock %}